
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆèªå¡«ç©ºæŒ‘æˆ°</title>
    <!-- è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* è¨­å®šå­—é«”ç‚º Interï¼Œä½†ä¸»è¦ä¸­æ–‡å­—é«”ä½¿ç”¨ç³»çµ±é è¨­ï¼Œç¢ºä¿é¡¯ç¤ºæ•ˆæœ */
        :root {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        }
        /* è‡ªå®šç¾©æŒ‰éˆ•æ¨£å¼ */
        .option-button {
            transition: all 0.15s ease-in-out;
        }
        .option-button:hover:not(.disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        /* æ›¿æ›æˆèªçš„æ–¹æ¡†æ¨£å¼ */
        .idiom-box {
            display: inline-block;
            width: 1.5rem; /* æ–¹æ¡†å¯¬åº¦ */
            height: 1.5rem; /* æ–¹æ¡†é«˜åº¦ */
            border: 2px solid #ef4444; /* ç´…è‰²é‚Šæ¡† */
            margin: 0 0.1rem;
            text-align: center;
            line-height: 1.5rem;
            font-weight: bold;
            color: #ef4444;
            background-color: #fee2e2; /* æ·ºç´…è‰²èƒŒæ™¯ */
            border-radius: 4px;
        }
        /* æˆåŠŸå¡«å…¥çš„æˆèªæ¨£å¼ */
        .idiom-filled {
            color: #10b981; /* ç¶ è‰²æ–‡å­— */
            font-weight: bold;
            margin: 0 0.25rem;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen p-4 sm:p-8">

    <div id="app" class="max-w-4xl mx-auto bg-white shadow-2xl rounded-xl p-6 md:p-10 border-t-8 border-red-500">
        <h1 class="text-3xl font-extrabold text-gray-800 mb-6 text-center">ğŸ“š æˆèªå¡«ç©ºæŒ‘æˆ° ğŸ“š</h1>

        <!-- æ­¥é©Ÿ 1: é¸æ“‡èª²åˆ¥ -->
        <div id="lesson-selection" class="space-y-4">
            <h2 class="text-xl font-semibold text-red-600 mb-3 border-b pb-2">æ­¥é©Ÿä¸€ï¼šé¸æ“‡æŒ‘æˆ°èª²åˆ¥</h2>
            <div id="lesson-buttons" class="grid grid-cols-2 sm:grid-cols-3 gap-3">
                <!-- Lesson buttons will be injected here -->
            </div>
        </div>

        <!-- æ­¥é©Ÿ 2: æŒ‘æˆ°ä»‹é¢ (é è¨­éš±è—) -->
        <div id="challenge-area" class="mt-8 hidden space-y-6">
            <h2 class="text-xl font-semibold text-red-600 mb-3 border-b pb-2">æ­¥é©ŸäºŒï¼šå®ŒæˆæŒ‘æˆ°</h2>
            
            <!-- æˆèªè§£é‡‹å€å¡Š (æ–°å¢) -->
            <div class="bg-blue-50 p-4 rounded-lg shadow-inner border-l-4 border-blue-500">
                <p id="current-lesson" class="text-lg font-medium text-red-700 mb-2"></p>
                <p class="text-md text-blue-800 leading-relaxed">
                    <span class="font-bold text-blue-600 mr-2">ğŸ’¡ è§£é‡‹ï¼š</span>
                    <span id="idiom-explanation" class="font-normal italic"></span>
                </p>
            </div>
            
            <!-- é€ å¥å€å¡Š (æ›´æ–°) -->
            <div class="bg-red-50 p-4 rounded-lg shadow-inner">
                <p class="text-2xl text-gray-800 leading-relaxed tracking-wider">
                    <span class="font-bold text-red-500 mr-2">é€ å¥ï¼š</span>
                    <span id="question-sentence" class="font-normal"></span>
                </p>
            </div>

            <div id="feedback-area" class="min-h-[6rem] flex flex-col items-center justify-center">
                <!-- Feedback/Success message goes here -->
                <p id="message" class="text-xl font-bold text-gray-600">è«‹å¾ä¸‹æ–¹é¸é …é¸å‡ºæ­£ç¢ºæˆèªã€‚</p>
            </div>
            
            <!-- èªéŸ³æŒ‰éˆ• -->
            <div id="speech-controls" class="w-full text-center hidden">
                <button id="speak-button" class="bg-yellow-500 text-white font-bold py-2 px-4 rounded-full shadow-lg hover:bg-yellow-600 transition-colors flex items-center justify-center mx-auto" onclick="speakIdiom()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 3v14a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 00.09-.217zM14.546 12.441a5.986 5.986 0 000-4.882 1 1 0 011.892.61c.142.66.216 1.334.216 2.015s-.074 1.355-.216 2.015a1 1 0 01-1.892.61z" clip-rule="evenodd" />
                    </svg>
                    æœ—è®€æˆèª
                </button>
                <p class="text-sm text-gray-500 mt-1">ï¼ˆä½¿ç”¨ç€è¦½å™¨å…§å»ºèªéŸ³ï¼‰</p>
            </div>


            <div id="options-area" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <button class="option-button bg-red-500 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed" onclick="checkAnswer(this)" data-answer=""></button>
                <button class="option-button bg-red-500 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed" onclick="checkAnswer(this)" data-answer=""></button>
                <button class="option-button bg-red-500 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed" onclick="checkAnswer(this)" data-answer=""></button>
            </div>

            <button id="next-button" class="w-full bg-green-500 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-green-600 transition-colors hidden disabled:opacity-50" onclick="nextQuestion()">ä¸‹ä¸€é¡ŒæŒ‘æˆ°</button>
        </div>
    </div>

    <script>
        // =========================================================================
        // æ ¸å¿ƒè³‡æ–™åº«: 1-12 èª²çš„æˆèªåŠå…¶é€ å¥èˆ‡è§£é‡‹ (å·²åŠ å…¥è§£é‡‹)
        // [æˆèª] æ˜¯æ›¿æ›ç”¨çš„ Placeholder
        // =========================================================================

        const idiomData = {
            "ç¬¬ä¸€èª² æˆ‘çš„å¿ƒæƒ…": [
                { idiom: "é›£èƒ½å¯è²´", explanation: "åšåˆ°äº†ä¸å®¹æ˜“åšåˆ°çš„äº‹ï¼Œæ‰€ä»¥ç‰¹åˆ¥çè²´ã€‚", sentence: "ä»–å°å°å¹´ç´€å°±æ‡‚å¾—å¹«å¿™åšå®¶äº‹ï¼ŒçœŸæ˜¯[æˆèª]ã€‚" },
                { idiom: "æ„›å±‹åŠçƒ", explanation: "æ¯”å–»æ„›ä¸€å€‹äººï¼Œä¹Ÿé€£å¸¶é—œæ„›å’Œä»–æœ‰é—œä¿‚çš„æ‰€æœ‰äº‹ã€‚", sentence: "æˆ‘å–œæ­¡å’Œä»–ä¸€èµ·ç©ï¼Œ[æˆèª]ï¼Œä¹Ÿå–œæ­¡å’Œä»–çš„å¦¹å¦¹ä¸€èµ·ç©ã€‚" },
                { idiom: "è¡Œé›²æµæ°´", explanation: "å½¢å®¹å¾…äººè™•äº‹æˆ–æ–‡ç« å­—ç•«ç”Ÿå‹•æµæš¢ï¼Œæ²’æœ‰æ‹˜æŸã€‚", sentence: "é€™é¦–æ­Œçš„ç¯€å¥è‡ªç„¶é †æš¢ï¼Œæœ‰å¦‚[æˆèª]ï¼Œå¤§å®¶éƒ½å–œæ­¡è½ã€‚" },
                { idiom: "é–‹èª å¸ƒå…¬", explanation: "å¦ç™½ã€èª æ‡‡çš„èªªå‡ºè‡ªå·±çš„æ„è¦‹ã€‚", sentence: "æˆ‘å¸Œæœ›ä½ å€‘[æˆèª]çš„èªªä¸€èªªï¼Œä¾†åŒ–è§£å½¼æ­¤çš„èª¤æœƒã€‚" },
                { idiom: "å¿ƒèŠ±æ€’æ”¾", explanation: "å½¢å®¹å¿ƒè£¡éå¸¸é«˜èˆˆã€å¿«æ¨‚ã€‚", sentence: "å¼Ÿå¼ŸçœŸèª çš„è®šç¾ï¼Œè®“åª½åª½[æˆèª]ã€‚" },
                { idiom: "ç¾èº«èªªæ³•", explanation: "ä»¥è¦ªèº«ç¶“é©—ç‚ºä¾‹è­‰ï¼Œå‘äººè¬›è§£èªªæ˜ã€‚", sentence: "è€å¸«è«‹è·³ç¹©å¾—ççš„äºº[æˆèª]ï¼Œå‘Šè¨´å¤§å®¶ç·´ç¿’çš„å¥½æ–¹æ³•ã€‚" }
            ],
            "ç¬¬äºŒèª² å½©è‰²çš„å¤©ç©º": [
                { idiom: "è€é¦¬è­˜é€”", explanation: "æ¯”å–»æœ‰ç¶“é©—çš„äººï¼Œå¯å¸¶é ˜äººèµ°ä¸Šæ­£ç¢ºçš„é“è·¯ã€‚", sentence: "å°å¼µå¸¸åˆ°æ—¥æœ¬æ—…éŠï¼Œé€™æ¬¡æœ‰ä»–[æˆèª]çš„å¸¶é ˜ä¸‹ï¼Œä¸€å®šç©å¾—å¾ˆç›¡èˆˆã€‚" },
                { idiom: "è€³ç›®ä¸€æ–°", explanation: "è½åˆ°çš„ã€çœ‹åˆ°çš„éƒ½æœ‰ä¸€ç¨®æ–°ç©ã€æ¸…çˆ½çš„æ„Ÿè¦ºã€‚", sentence: "é€™åº§å…’ç«¥æ¨‚åœ’ç¶“éæ•´ä¿®å¾Œï¼Œè®“äººæ„Ÿåˆ°[æˆèª]ã€‚" },
                { idiom: "å®ˆæœ›ç›¸åŠ©", explanation: "äº’ç›¸ç…§æ‡‰ï¼Œå…±åŒé˜²ç¯„ã€æŠµç¦¦ï¼Œä»¥ç¶­è­·åœ˜é«”æˆ–åœ°æ–¹çš„å®‰å¯§ã€‚", sentence: "åŒå­¸å€‘è¦[æˆèª]ï¼Œå¯ä»¥å¹«åŠ©åˆ¥äººï¼Œä¹Ÿå¯ä»¥å¹«åŠ©è‡ªå·±ã€‚" },
                { idiom: "æœ‰å§‹æœ‰çµ‚", explanation: "æœ‰é–‹é ­æœ‰çµå°¾ã€‚æŒ‡åšäº‹èƒ½è²«å¾¹åˆ°åº•ã€‚", sentence: "ç­é•·åšäº‹èªçœŸè² è²¬ï¼Œç¸½æ˜¯èƒ½[æˆèª]çš„å®Œæˆï¼Œæˆ‘è¦å‘ä»–å­¸ç¿’ã€‚" },
                { idiom: "ä¸çŸ¥æ‰€æª", explanation: "å½¢å®¹ä¸çŸ¥é“æ€éº¼è¾¦æ‰å¥½ã€‚", sentence: "é‡åˆ°åœ°éœ‡è¦ä¿æŒå†·éœï¼Œæ‰ä¸æœƒ[æˆèª]ã€‚" },
                { idiom: "å¿—åŒé“åˆ", explanation: "å¿—å‘ç›¸åŒï¼Œæ„è¦‹ç›¸åˆã€‚", sentence: "å¤šåƒåŠ å„ç¨®æ´»å‹•ï¼Œå°±å¯ä»¥æ‰¾åˆ°[æˆèª]çš„æœ‹å‹ã€‚" }
            ],
            "ç¬¬ä¸‰èª² åœ‹ç‹åšæ–°è¡£": [
                { idiom: "ç•«é¾é»ç›", explanation: "æ¯”å–»ç¹ªç•«ã€ä½œæ–‡ã€è¬›è©±åœ¨é—œéµè™•åŠ ä¸Šç²¾é‡‡çš„ä¸€ç­†ï¼Œä½¿å…§å®¹ç”Ÿå‹•ã€‚", sentence: "é€™å¹…ç•«æœ‰äº†ä»–[æˆèª]çš„ä¸€ç­†ï¼Œçœ‹èµ·ä¾†æ›´æ¼‚äº®äº†ï¼" },
                { idiom: "æ”¹é ­æ›é¢", explanation: "å¾¹åº•æ”¹è®Šå¤–è§€ï¼Œæœ‰é‡æ–°åšäººçš„æ„æ€ã€‚", sentence: "ä»–å·²ç¶“[æˆèª]ï¼ŒåŠªåŠ›åšå¥½äº‹ï¼Œæˆ‘å€‘æ‡‰è©²çµ¦ä»–é¼“å‹µå’Œæ©Ÿæœƒã€‚" },
                { idiom: "åƒæ–¹ç™¾è¨ˆ", explanation: "æƒ³ç›¡æˆ–ç”¨ç›¡ä¸€åˆ‡æ–¹æ³•ã€‚", sentence: "ç‚ºäº†è§£æ±ºçœ¼å‰çš„é›£é¡Œï¼Œæˆ‘å€‘ç”¨ç›¡äº†[æˆèª]ï¼Œå¸Œæœ›æœ€å¾Œå¯ä»¥æˆåŠŸã€‚" },
                { idiom: "ç™¾ç™¼ç™¾ä¸­", explanation: "å½¢å®¹å°„ç®­æˆ–å°„æ“Šéå¸¸æº–ç¢ºï¼Œæ¯ç™¼å¿…ä¸­ã€‚", sentence: "åªè¦‹ä»–åèº«è·³æŠ•ï¼Œåˆé€²äº†ï¼ŒçœŸæ˜¯[æˆèª]ï¼" },
                { idiom: "ç´„æ³•ä¸‰ç« ", explanation: "äº‹å…ˆç´„å®šå¹¾æ¢ä¸»è¦çš„è¦å®šï¼Œå¤§å®¶å…±åŒéµå®ˆã€‚", sentence: "æˆ‘å’Œåª½åª½[æˆèª]ï¼Œåœ¨å…¬åœ’ç©åˆ°äº”é»å°±æœƒå›å®¶ã€‚" },
                { idiom: "å››åˆ†äº”è£‚", explanation: "å½¢å®¹åˆ†æ•£ã€ä¸å®Œæ•´ï¼Œæ”¯é›¢ç ´ç¢ã€‚", sentence: "å°çµ„å› ç‚ºæ„è¦‹ä¸åŒåµäº†èµ·ä¾†ï¼Œè®Šå¾—[æˆèª]ã€‚" }
            ],
            "ç¬¬å››èª² æ°´è‰ä¸‹çš„å‘±å‘±": [
                { idiom: "æœ‰è²æœ‰è‰²", explanation: "å½¢å®¹æ•˜è¿°ã€è¡¨æ¼”ç”Ÿå‹•é€¼çœŸï¼Œå…§å®¹ç²¾é‡‡ã€‚", sentence: "ä»–å€‘æŠŠæ•…äº‹èªªå¾—[æˆèª]ï¼Œå¤§å®¶è½å®Œéƒ½ç‚ºä»–å€‘é¼“æŒã€‚" },
                { idiom: "å½¢å½±ä¸é›¢", explanation: "å½¢å®¹é—œä¿‚è¦ªå¯†ï¼Œç„¡æ™‚ç„¡åˆ»ä¸åœ¨ä¸€èµ·ã€‚", sentence: "å§å§å’Œå¥¹çš„å¥½æœ‹å‹ç¸½æ˜¯[æˆèª]ï¼Œåƒæ˜¯è¦ªå§å¦¹ä¸€æ¨£ã€‚" },
                { idiom: "åˆ¥é–‹ç”Ÿé¢", explanation: "å¦å‰µä¸€ç¨®æ–°å±€é¢ã€æ–°é¢¨æ ¼ã€‚", sentence: "é€™å ´[æˆèª]çš„æ£’çƒéŸ³æ¨‚æœƒï¼Œæœ‰ç²¾å½©çš„æ­Œæ›²å’Œè¡¨æ¼”ï¼Œè®“å¤§å®¶è·Ÿè‘—éŸ³æ¨‚åˆå”±åˆè·³ã€‚" },
                { idiom: "æ˜“å¦‚åæŒ", explanation: "æ¯”å–»äº‹æƒ…éå¸¸å®¹æ˜“ï¼Œæ¯«ä¸è²»åŠ›ã€‚", sentence: "ä»–çš„åŠ›æ°£å¾ˆå¤§ï¼ŒæŠ¬èµ·æ›¸æ«ƒæ˜¯[æˆèª]çš„äº‹ã€‚" },
                { idiom: "æ˜çŸ¥æ•…çŠ¯", explanation: "æ˜æ˜çŸ¥é“ä¸å°æˆ–ä¸èƒ½åšï¼Œå»æ•…æ„å»åšã€‚", sentence: "å¼Ÿå¼Ÿ[æˆèª]ï¼ŒåˆåšéŒ¯äº‹äº†ï¼Œè®“åª½åª½ä¸çŸ¥é“è©²æ‹¿ä»–æ€éº¼è¾¦?" },
                { idiom: "ä¸€æˆä¸è®Š", explanation: "ä¸€é»ä¹Ÿæ²’æœ‰æ”¹è®Šã€‚", sentence: "çˆ¸çˆ¸åšäº‹æœ‰å€‹[æˆèª]çš„åŸå‰‡ï¼Œå°±æ˜¯èªçœŸè² è²¬ã€‚" }
            ],
            "ç¬¬äº”èª² æ²™ç˜ä¸Šçš„ç•«": [
                { idiom: "èšæ²™æˆå¡”", explanation: "æ¯”å–»ç©å°‘æˆå¤šã€‚", sentence: "åªè¦æˆ‘å€‘åŠªåŠ›ï¼Œ[æˆèª]ï¼ŒæˆåŠŸå°±åœ¨çœ¼å‰ã€‚" },
                { idiom: "å¤©æ¶¯æµ·è§’", explanation: "å½¢å®¹æ¥µé çš„åœ°æ–¹ã€‚", sentence: "æœ‰äº†æ‰‹æ©Ÿï¼Œå°±ç®—[æˆèª]ï¼Œæˆ‘å€‘éƒ½èƒ½è¯çµ¡å°æ–¹ã€‚" },
                { idiom: "çŸ¥é›£è€Œé€€", explanation: "çŸ¥é“äº‹æƒ…å›°é›£å°±é€€ç¸®ï¼Œæ²’æœ‰å‹‡æ°£é¢å°ã€‚", sentence: "ä»–åˆ†äº«è‡ªå·±æˆåŠŸçš„æ–¹æ³•ï¼Œå°±æ˜¯è¦åŠªåŠ›å‘å‰ï¼Œä¸èƒ½æœ‰[æˆèª]çš„æƒ³æ³•ã€‚" },
                { idiom: "ä¸€æœä¸€å¤•", explanation: "å½¢å®¹å¾ˆçŸ­æš«çš„æ™‚é–“ã€‚", sentence: "ç•«åœ–è¦ç•«å¾—å¥½ï¼Œä¸æ˜¯[æˆèª]å°±èƒ½é”æˆï¼Œè¦ç¶“éé•·æ™‚é–“çš„ç·´ç¿’ã€‚" },
                { idiom: "è…³è¸å¯¦åœ°", explanation: "æ¯”å–»åšäº‹èªçœŸã€å¯¦åœ¨ã€‚", sentence: "ä»–é€é[æˆèª]çš„ç·´ç¿’ï¼Œæ‰è´å¾—æ¯”è³½ã€‚" }
            ],
            "ç¬¬å…­èª² è‰å¢è£¡çš„æ˜Ÿæ˜Ÿ": [
                { idiom: "ç²—èŒ¶æ·¡é£¯", explanation: "æŒ‡ç°¡å–®çš„é£¯é£Ÿã€‚", sentence: "é„°å±…çš„è€å¤«å©¦æ¯å¤©éƒ½æ˜¯[æˆèª]ï¼Œéè‘—ç°¡å–®çš„ç”Ÿæ´»ã€‚" },
                { idiom: "èƒ¸æœ‰æˆç«¹", explanation: "æ¯”å–»äº‹å…ˆå·²æœ‰äº†æº–å‚™æˆ–è¨ˆåŠƒã€‚", sentence: "å“¥å“¥[æˆèª]çš„å»æ¯”è³½ï¼Œæœç„¶æ‹¿å›å¥½æˆç¸¾ã€‚" },
                { idiom: "é ­é ­æ˜¯é“", explanation: "å½¢å®¹èªªè©±æœ‰æ¢ç†ï¼Œè„ˆçµ¡æ¸…æ¥šã€‚", sentence: "ä»–è¬›å¾—[æˆèª]ï¼Œæœ€å¾Œå¤§å®¶éƒ½åŒæ„æ¡ç”¨ä»–çš„æ„è¦‹ã€‚" },
                { idiom: "è¢–æ‰‹æ—è§€", explanation: "æ¯”å–»ç½®èº«äº‹å¤–ï¼Œä¸äºˆéå•æˆ–å¹«åŠ©ã€‚", sentence: "å¤§å®¶å¿™æˆä¸€åœ˜ï¼Œå¥¹å»æ²’äº‹æƒ…åšï¼Œ[æˆèª]çš„ç«™åœ¨é‚£è£¡ã€‚" },
                { idiom: "ç›®ä¸è½‰ç›", explanation: "å½¢å®¹æ³¨ç›®å‡è¦–ï¼Œå°ˆå¿ƒè§€çœ‹ã€‚", sentence: "çœ‹è‘—å»£å ´ä¸Šå¥‡å¹»çš„é­”è¡“è¡¨æ¼”ï¼ŒéŠå®¢å€‘[æˆèª]ï¼Œå°±æ€•éŒ¯éç²¾å½©çš„æ¼”å‡ºã€‚" }
            ],
            "ç¬¬ä¸ƒèª² ä¸ä¸€æ¨£çš„ç¾é£Ÿ": [
                { idiom: "è£æ¨¡ä½œæ¨£", explanation: "æ•…æ„åšå‡ºæŸç¨®å§¿æ…‹ï¼Œä»¥å¼•äººæ³¨æ„æˆ–ç‚«è€€è‡ªå·±ã€‚", sentence: "ä»–[æˆèª]çš„é“æ­‰ï¼Œå¾ˆé›£è®“äººåŸè«’ä»–ã€‚" },
                { idiom: "ç”Ÿé¾æ´»è™", explanation: "å½¢å®¹æ´»æ½‘çŸ¯å¥ï¼Œå……æ»¿æ´»åŠ›ã€‚", sentence: "çƒå ´ä¸Šçš„åŒå­¸å€‘ï¼Œå€‹å€‹[æˆèª]ï¼Œéå¸¸æœ‰æ´»åŠ›çš„æ¨£å­ã€‚" },
                { idiom: "å‡ºå¥‡åˆ¶å‹", explanation: "ç”¨å¥‡ç‰¹çš„è¾¦æ³•å–å¾—å‹åˆ©ã€‚", sentence: "é€™æ¬¡çƒè³½ï¼Œæ•™ç·´çš„æˆ°ç•¥[æˆèª]ï¼Œæˆ‘å€‘çµ‚æ–¼è´å¾—å† è»ã€‚" },
                { idiom: "ç¯€å¤–ç”Ÿæ", explanation: "æ¯”å–»åœ¨ä¸»è¦å•é¡Œä¹‹å¤–ï¼Œåˆç™¼ç”Ÿäº†æ–°çš„å•é¡Œã€‚", sentence: "é€™æ¶ˆæ¯è¶Šå¤šäººçŸ¥é“ï¼Œè¶Šæœƒ[æˆèª]ã€‚" },
                { idiom: "é¢¨å¹³æµªéœ", explanation: "å½¢å®¹æ²’æœ‰é¢¨æµªï¼Œæ°´é¢å¹³éœã€‚", sentence: "é€™ä»¶äº‹ç¸½ç®—[æˆèª]çš„éå»äº†ã€‚" },
                { idiom: "å®‰åˆ†å®ˆå·±", explanation: "å®ˆä½æœ¬åˆ†ï¼Œä¸åšé•æ³•äº‚ç´€çš„äº‹ã€‚", sentence: "ä»–ç¶“éé€™æ¬¡å¯æ€•çš„äº‹ä»¶ï¼Œçµ‚æ–¼çŸ¥é“[æˆèª]äº†ã€‚" }
            ],
            "ç¬¬å…«èª² ç¾é£Ÿåˆ†äº«æ—¥": [
                { idiom: "å¾—æ„å¿˜å½¢", explanation: "å½¢å®¹é«˜èˆˆå¾—å¤±å»å¸¸æ…‹ï¼Œèˆ‰æ­¢è¼•ç‹‚ã€‚", sentence: "å¼Ÿå¼Ÿå‰›å­¸æœƒé¨è…³è¸è»Šå°±[æˆèª]çš„æ”¾é–‹æŠŠæ‰‹ï¼Œå·®é»æ‘”å€’ã€‚" },
                { idiom: "ç´™ä¸Šè«‡å…µ", explanation: "æ¯”å–»ä¸åˆ‡å¯¦éš›çš„ç©ºè«‡ã€‚", sentence: "é€™äº›æƒ³æ³•éƒ½åªæ˜¯[æˆèª]ï¼Œæˆ‘å€‘é‚„æ˜¯è¦å‹•æ‰‹åšä»¥å¾Œï¼Œæ‰èƒ½ç™¼ç¾å•é¡Œã€‚" },
                { idiom: "åƒè®Šè¬åŒ–", explanation: "å½¢å®¹è®ŠåŒ–æ¥µå¤šã€‚", sentence: "é€™è£¡æ–½æ”¾çš„ç…™ç«ï¼ŒèŠ±æ¨£[æˆèª]ï¼Œçœ‹èµ·ä¾†çœŸæ˜¯ç¾éº—!" },
                { idiom: "å„æœ‰åƒç§‹", explanation: "æ¯”å–»å„æœ‰é•·è™•ï¼Œä¸åˆ†é«˜ä¸‹ã€‚", sentence: "é€™å…©åé¸æ‰‹çš„è·³æ°´å‹•ä½œ[æˆèª]ï¼Œè£åˆ¤å¾ˆé›£æ±ºå®šå† è»ã€‚" },
                { idiom: "ç§»èŠ±æ¥æœ¨", explanation: "æ¯”å–»æš—ä¸­æ›´æ›äº‹ç‰©ï¼Œæ¬ºé¨™ä»–äººã€‚", sentence: "ç‹å…ˆç”Ÿè²·çš„ä¸Šç­‰æ«»æ¡ƒï¼Œä¸çŸ¥ä»€éº¼æ™‚å€™è¢«[æˆèª]ï¼Œè®Šæˆè‘¡è„äº†!" },
                { idiom: "è¨€è½è¨ˆå¾", explanation: "å½¢å®¹å°æŸäººéå¸¸ä¿¡ä»»ï¼Œå®Œå…¨è½å¾ä»–çš„è©±ã€‚", sentence: "æç¶“ç†å¾ˆä¿¡ä»»ä»–çš„åŠ©ç†ï¼Œå°ä»–ç¸½æ˜¯[æˆèª]ã€‚" }
            ],
            "ç¬¬ä¹èª² å¥½å‘³é“": [
                { idiom: "å¤é“ç†±è…¸", explanation: "å½¢å®¹å¾…äººèª æ‡‡ã€ç†±å¿ƒã€‚", sentence: "é»ƒé‡Œé•·ç¸½æ˜¯é‚£éº¼[æˆèª]ï¼Œå¾…äººèª æ‡‡åˆç†±å¿ƒã€‚" },
                { idiom: "æ°´æ·±ç«ç†±", explanation: "æ¯”å–»ç”Ÿæ´»æ¥µç«¯å›°è‹¦ã€‚", sentence: "æˆ°äº‚ä¸­çš„åœ‹å®¶ï¼Œäººæ°‘é€šå¸¸éƒ½éè‘—[æˆèª]çš„æ—¥å­ã€‚" },
                { idiom: "è’¸è’¸æ—¥ä¸Š", explanation: "å½¢å®¹äº‹æ¥­ä¸æ–·å‘ä¸Šç™¼å±•ã€‚", sentence: "åœ¨ä»–çš„åŠªåŠ›ç¶“ç‡Ÿä¸‹ï¼Œå…¬å¸æ¥­ç¸¾[æˆèª]ã€‚" },
                { idiom: "åä¸è™›å‚³", explanation: "åè²èˆ‡å¯¦éš›ç›¸ç¬¦ï¼Œä¸€é»ä¹Ÿæ²’æœ‰èª‡å¤§ã€‚", sentence: "è¦ªçœ¼çœ‹åˆ°é™½æ˜å±±ç™¾èŠ±é½Šé–‹çš„æ™¯è‰²ï¼Œæœç„¶[æˆèª]å•Š!" },
                { idiom: "å››é€šå…«é”", explanation: "å½¢å®¹äº¤é€šä¾¿åˆ©ã€‚", sentence: "é€™è£¡çš„äº¤é€š[æˆèª]ï¼Œè¦åˆ°å„å€‹æ™¯é»éƒ½å¾ˆæ–¹ä¾¿ã€‚" },
                { idiom: "ç´°æ°´é•·æµ", explanation: "æ¯”å–»ç¯€çœã€ç©è“„ï¼Œå¯é•·ä¹…ä½¿ç”¨ã€‚", sentence: "æ¯æ—¥å­˜ä¸‹ä¸€é»å°éŒ¢ï¼Œ[æˆèª]ï¼Œä¹Ÿæœƒç´¯ç©æˆä¸€ç­†è²¡å¯Œã€‚" }
            ],
            "ç¬¬åèª² åŠ åŠ æ¸›æ¸›": [
                { idiom: "è™›æœ‰å…¶è¡¨", explanation: "ç©ºæœ‰è¯éº—çš„å¤–è¡¨ï¼Œå…§åœ¨å»å¾ˆç©ºè™›ã€‚", sentence: "åˆ¥çœ‹ä»–èªªå¾—é ­é ­æ˜¯é“ï¼Œå…¶å¯¦ä»€éº¼ä¹Ÿä¸æ‡‚ï¼Œåªæ˜¯[æˆèª]ç½·äº†ã€‚" },
                { idiom: "å°ç­”å¦‚æµ", explanation: "å½¢å®¹å›ç­”å•é¡Œæµæš¢ã€å¿«é€Ÿã€‚", sentence: "å°æ˜å°è€å¸«çš„æå•ï¼Œç¸½æ˜¯[æˆèª]ï¼ŒçœŸå²å®³ã€‚" },
                { idiom: "ä¸ƒå˜´å…«èˆŒ", explanation: "å½¢å®¹äººå¤šå˜´é›œï¼Œè­°è«–ç´›ç´›ã€‚", sentence: "ä»Šå¤©ç­æœƒè¨è«–æ…¶ç”Ÿæœƒçš„æ´»å‹•ï¼ŒåŒå­¸å€‘[æˆèª]çš„çˆ­ç›¸æå‡ºæ„è¦‹ã€‚" },
                { idiom: "ç•°æƒ³å¤©é–‹", explanation: "ä¸ç¬¦å¯¦éš›ã€ä¸åˆäº‹ç†çš„å¥‡ç‰¹æƒ³æ³•ã€‚", sentence: "å› ç‚ºèŠç‰¹å…„å¼Ÿçš„[æˆèª]ï¼Œæœ€å¾Œç«Ÿç„¶å¯¦ç¾äº†äººé¡é£›è¡Œçš„ç¾å¤¢ã€‚" },
                { idiom: "å®ˆå£å¦‚ç“¶", explanation: "å˜´åƒç“¶å£ä¸€æ¨£å°å¾—åš´ç·Šï¼Œæ¯”å–»åš´å®ˆç¥•å¯†ã€‚", sentence: "åª½åª½[æˆèª]ï¼Œä¸€ç›´ä¸å‘Šè¨´æˆ‘ç”Ÿæ—¥ç¦®ç‰©æ˜¯ä»€éº¼ã€‚" },
                { idiom: "å°ç‰›å½ˆç´", explanation: "æ¯”å–»å°ä¸æ‡‚é“ç†çš„äººè¬›é“ç†ï¼Œç™½è²»å£èˆŒã€‚", sentence: "è·Ÿä»–è¬›é“ç†ï¼Œå°±åƒ[æˆèª]ï¼Œé‚„æ˜¯åˆ¥æµªè²»æ™‚é–“å§!" }
            ],
            "ç¬¬åä¸€èª² å¥‡æ€ªçš„é–€": [
                { idiom: "å°‘è¦‹å¤šæ€ª", explanation: "å¾ˆå°‘è¦‹åˆ°å°±è¦ºå¾—å¥‡æ€ªã€‚", sentence: "é€™ç¨®äº‹ç¶“å¸¸ç™¼ç”Ÿï¼Œæ²’ä»€éº¼ç¨€å¥‡ï¼Œä½ å°±åˆ¥[æˆèª]äº†ã€‚" },
                { idiom: "åç«‹ä¸å®‰", explanation: "å½¢å®¹å¿ƒæƒ…ç·Šå¼µï¼Œåè‘—ç«™è‘—éƒ½ä¸å®‰å¯§ã€‚", sentence: "ç­‰ä¸€ä¸‹å°±è¦å…¬å¸ƒå¾—çåå–®äº†ï¼Œå¤§å®¶éƒ½é–‹å§‹[æˆèª]ã€‚" },
                { idiom: "å¤©é¦¬è¡Œç©º", explanation: "æ¯”å–»æ–‡ç« ã€æ›¸æ³•ã€è¨€èªã€æƒ³åƒç­‰æ°£å‹¢è±ªé‚ï¼Œä¸å—æ‹˜æŸã€‚", sentence: "é€™æœ¬æ•…äº‹æ›¸çš„æƒ…ç¯€ï¼Œå……æ»¿[æˆèª]çš„æƒ³åƒï¼Œå¸å¼•æˆ‘ä¸€ç›´è®€ä¸‹å»ã€‚" },
                { idiom: "äº¤é ­æ¥è€³", explanation: "å½¢å®¹å…©å€‹äººæ¹Šè¿‘ä½è²èªªè©±ã€‚", sentence: "ä¸Šèª²æ™‚è¦å°ˆå¿ƒè½è¬›ï¼Œä¸è¦[æˆèª]ã€‚" },
                { idiom: "åŠ›ä¸å¾å¿ƒ", explanation: "å¿ƒè£¡æƒ³åšï¼ŒåŠ›é‡å»è¾¦ä¸åˆ°ã€‚", sentence: "å¦‚æœåšäº‹å¸¸å¸¸å¤±æ•—ï¼Œå°±æœƒæœ‰[æˆèª]çš„æ„Ÿè¦ºã€‚" },
                { idiom: "æµ·åº•æ’ˆé‡", explanation: "æ¯”å–»æ¥µé›£æ‰¾åˆ°æˆ–æ¥µé›£è¾¦åˆ°ã€‚", sentence: "å¦‚æœä¸çŸ¥é“ä»–çš„åœ°å€ï¼Œè¦æ‰¾åˆ°ä»–ï¼Œå°±åƒ[æˆèª]ä¸€æ¨£å›°é›£ã€‚" }
            ],
            "ç¬¬åäºŒèª² è© éµ": [
                { idiom: "åƒé‡Œéµæ¯›", explanation: "æ¯”å–»ç¦®ç‰©é›–è¼•ï¼Œä½†æƒ…æ„çœŸæ‘¯ã€‚", sentence: "é€™ä»½ç¦®ç‰©é›–ç„¶ä¸è²´é‡ï¼Œå»æ˜¯æˆ‘[æˆèª]çš„å¿ƒæ„ï¼Œè«‹ä½ ä¸€å®šè¦æ”¶ä¸‹ã€‚" },
                { idiom: "ä¸€æ³¢ä¸‰æŠ˜", explanation: "æ¯”å–»äº‹æƒ…é€²è¡Œä¸­é‡åˆ°è¨±å¤šæ›²æŠ˜ã€‚", sentence: "æ•…äº‹è£¡çš„è‹±é›„ç¶“é[æˆèª]ä¹‹å¾Œï¼Œçµ‚æ–¼æ‰“æ•—å£äººæ•‘äº†å¤§å®¶ã€‚" },
                { idiom: "ä¸€é¼“ä½œæ°£", explanation: "å½¢å®¹é¼“è¶³å‹‡æ°£ï¼Œä¸€å£æ°£æŠŠäº‹æƒ…åšå®Œã€‚", sentence: "å·¥ä½œåªå‰©ä¸‹ä¸€é»é»äº†ï¼Œæˆ‘å€‘[æˆèª]æŠŠé€™äº›äº‹åšå®Œå†ä¼‘æ¯ã€‚" },
                { idiom: "é¦–å±ˆä¸€æŒ‡", explanation: "æ¯”å–»æœ€çªå‡ºã€æœ€å„ªç§€ã€‚", sentence: "å°å½©æ˜¯ç­ä¸Š[æˆèª]çš„ç†±å¿ƒåŒå­¸ï¼Œå¸¸å¸¸ä¸»å‹•å¹«åŠ©åˆ¥äººã€‚" },
                { idiom: "èº«é«”åŠ›è¡Œ", explanation: "è¦ªè‡ªé«”é©—ï¼ŒåŠªåŠ›å¯¦è¡Œã€‚", sentence: "ä»–è½äº†ä¿è­·åœ°çƒçš„æ•…äº‹ä¹‹å¾Œï¼Œæ±ºå®š[æˆèª]ï¼Œå¾éš¨æ‰‹é—œç‡ˆåšèµ·ã€‚" },
                { idiom: "å½¢å–®å½±éš»", explanation: "å½¢å®¹å­¤å–®ç„¡ä¾ã€‚", sentence: "æ¹–é¢ä¸Šçš„å¤©éµç¨ä¾†ç¨å¾€ï¼Œ[æˆèª]çš„ï¼Œè®“äººè¦ºå¾—é›£éã€‚" }
            ]
        };

        // =========================================================================
        // éŠæˆ²ç‹€æ…‹èˆ‡å·¥å…·å‡½æ•¸
        // =========================================================================
        let currentLesson = null;
        let lessonIdioms = [];
        let currentQuestion = null;
        let allIdioms = Object.values(idiomData).flat().map(item => item.idiom);
        
        // èªéŸ³ç›¸é—œè®Šæ•¸
        const synth = window.speechSynthesis;
        let chineseVoice = null; 

        // éš¨æ©Ÿå·¥å…·å‡½æ•¸
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // å¾é™£åˆ—ä¸­éš¨æ©Ÿå–å‡º n å€‹ä¸é‡è¤‡çš„å…ƒç´ 
        function getRandomElements(arr, n, excludeElement = null) {
            let tempArr = arr.filter(item => item !== excludeElement);
            shuffleArray(tempArr);
            return tempArr.slice(0, n);
        }

        // èªéŸ³åˆå§‹åŒ–ï¼šè¼‰å…¥ä¸­æ–‡èªéŸ³
        function setupSpeechSynthesis() {
            if (!('speechSynthesis' in window)) {
                console.warn('ç€è¦½å™¨ä¸æ”¯æ´ Web Speech APIã€‚');
                return;
            }

            // å˜—è©¦æ‰¾åˆ°ä¸€å€‹ä¸­æ–‡èªéŸ³
            function populateVoiceList() {
                const voices = synth.getVoices();
                // å„ªå…ˆå°‹æ‰¾å°ç£æˆ–æ™®é€šè©±çš„ä¸­æ–‡èªéŸ³
                chineseVoice = voices.find(voice => voice.lang === 'zh-TW' || voice.lang === 'zh-CN' || voice.lang.includes('zh'));
            }

            // Chrome/Edge éœ€è¦ç­‰å¾… voices è¼‰å…¥
            if (synth.onvoiceschanged !== undefined) {
                synth.onvoiceschanged = populateVoiceList;
            }
            populateVoiceList(); // ç«‹å³å˜—è©¦è¼‰å…¥
        }

        // æœ—è®€æˆèª (Web Speech API)
        window.speakIdiom = function() {
            if (!currentQuestion || !synth) return;

            // å¦‚æœæ­£åœ¨æœ—è®€ï¼Œå…ˆå–æ¶ˆ
            if (synth.speaking) {
                 synth.cancel();
            }

            const idiom = currentQuestion.idiom;
            const utterance = new SpeechSynthesisUtterance(idiom);
            
            // è¨­å®šèªéŸ³ï¼Œå¦‚æœæ‰¾åˆ°ä¸­æ–‡èªéŸ³å‰‡ä½¿ç”¨ï¼Œå¦å‰‡ä½¿ç”¨é è¨­
            if (chineseVoice) {
                utterance.voice = chineseVoice;
            } else {
                utterance.lang = 'zh-TW'; // å˜—è©¦æŒ‡å®šä¸­æ–‡
            }
            
            utterance.rate = 0.8; // è®€æ…¢ä¸€é»
            utterance.pitch = 1.0;

            synth.speak(utterance);
        }


        // åˆå§‹åŒ–: ç”Ÿæˆèª²åˆ¥æŒ‰éˆ•
        function initLessonButtons() {
            const container = document.getElementById('lesson-buttons');
            Object.keys(idiomData).forEach(lessonName => {
                const button = document.createElement('button');
                button.className = 'bg-blue-500 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:bg-blue-600 transition-colors option-button';
                button.textContent = lessonName.split(' ')[0]; // åªéœ€è¦ "ç¬¬ä¸€èª²", "ç¬¬äºŒèª²"
                button.onclick = () => selectLesson(lessonName);
                container.appendChild(button);
            });
        }

        // é¸æ“‡èª²åˆ¥ä¸¦é–‹å§‹æŒ‘æˆ°
        function selectLesson(lessonName) {
            currentLesson = lessonName;
            lessonIdioms = [...idiomData[lessonName]]; // è¤‡è£½ä¸€ä»½ï¼Œä»¥ä¾¿äº‚åºå’Œå‡ºé¡Œ
            shuffleArray(lessonIdioms);

            document.getElementById('lesson-selection').classList.add('hidden');
            document.getElementById('challenge-area').classList.remove('hidden');
            document.getElementById('current-lesson').textContent = `æ­£åœ¨æŒ‘æˆ°ï¼š${lessonName}`;

            nextQuestion();
        }

        // è¼‰å…¥ä¸‹ä¸€é¡Œ
        function nextQuestion() {
            // é‡ç½®ä»‹é¢
            document.getElementById('idiom-explanation').textContent = ''; // æ¸…ç©ºè§£é‡‹
            document.getElementById('feedback-area').innerHTML = `<p id="message" class="text-xl font-bold text-gray-600">è«‹å¾ä¸‹æ–¹é¸é …é¸å‡ºæ­£ç¢ºæˆèªã€‚</p>`;
            document.getElementById('next-button').classList.add('hidden');
            document.getElementById('speech-controls').classList.add('hidden'); // éš±è—èªéŸ³æŒ‰éˆ•

            if (synth && synth.speaking) {
                 synth.cancel(); // åœæ­¢æœ—è®€
            }


            if (lessonIdioms.length === 0) {
                // æ‰€æœ‰é¡Œç›®å·²å®Œæˆ
                document.getElementById('challenge-area').innerHTML = `
                    <div class="text-center p-10 bg-yellow-100 rounded-lg">
                        <p class="text-3xl font-extrabold text-yellow-700 mb-4">ğŸ‰ æ­å–œï¼å®Œæˆæœ¬èª²æ‰€æœ‰æŒ‘æˆ°ï¼ ğŸ‰</p>
                        <button class="bg-red-500 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-red-600 transition-colors mt-4" onclick="window.location.reload()">é‡æ–°é–‹å§‹ / é¸æ“‡å…¶ä»–èª²åˆ¥</button>
                    </div>
                `;
                return;
            }

            // 1. å–å¾—ä¸‹ä¸€é¡Œ
            currentQuestion = lessonIdioms.pop();
            const correctIdiom = currentQuestion.idiom;
            
            // 2. é¡¯ç¤ºè§£é‡‹
            document.getElementById('idiom-explanation').textContent = currentQuestion.explanation;

            // 3. æ›¿æ›é€ å¥ä¸­çš„æ–¹æ¡†
            const questionText = currentQuestion.sentence.replace(
                '[æˆèª]', 
                Array(correctIdiom.length).fill('<span class="idiom-box">â–¡</span>').join('')
            );
            
            document.getElementById('question-sentence').innerHTML = questionText;

            // 4. æº–å‚™é¸é …
            const decoys = getRandomElements(allIdioms, 2, correctIdiom);
            const options = shuffleArray([correctIdiom, ...decoys]);
            
            const optionButtons = document.querySelectorAll('#options-area button');
            optionButtons.forEach((button, index) => {
                button.textContent = options[index];
                button.dataset.answer = options[index];
                button.classList.remove('bg-green-500', 'bg-red-700', 'hidden');
                button.classList.add('bg-red-500');
                button.disabled = false;
            });
        }

        // æª¢æŸ¥ç­”æ¡ˆ
        window.checkAnswer = function(selectedButton) {
            const allButtons = document.querySelectorAll('#options-area button');
            const selectedAnswer = selectedButton.dataset.answer;
            const correctAnswer = currentQuestion.idiom;
            
            // ç¦ç”¨æ‰€æœ‰æŒ‰éˆ•
            allButtons.forEach(btn => btn.disabled = true);

            if (selectedAnswer === correctAnswer) {
                // ç­”å°é‚è¼¯
                selectedButton.classList.remove('bg-red-500');
                selectedButton.classList.add('bg-green-500');
                
                // å¡«å…¥æˆèªä¸¦é«˜äº®
                const filledSentence = currentQuestion.sentence.replace(
                    '[æˆèª]', 
                    `<span class="idiom-filled">${correctAnswer}</span>`
                );
                
                document.getElementById('question-sentence').innerHTML = filledSentence;
                document.getElementById('feedback-area').innerHTML = `
                    <p class="text-2xl font-bold text-green-600">âœ… å¤ªæ£’äº†ï¼ç­”æ¡ˆæ­£ç¢ºï¼</p>
                    <p class="text-sm text-gray-500 mt-1">æ­£ç¢ºæˆèªå·²é¡¯ç¤ºï¼Œæ‚¨å¯ä»¥é»æ“Šä¸‹æ–¹æŒ‰éˆ•æœ—è®€ã€‚</p>
                `;
                document.getElementById('next-button').classList.remove('hidden');
                document.getElementById('speech-controls').classList.remove('hidden'); // é¡¯ç¤ºèªéŸ³æŒ‰éˆ•
                
                // è‡ªå‹•æœ—è®€æ­£ç¢ºæˆèª
                speakIdiom();

            } else {
                // ç­”éŒ¯é‚è¼¯
                selectedButton.classList.remove('bg-red-500');
                selectedButton.classList.add('bg-red-700');
                document.getElementById('feedback-area').innerHTML = `
                    <p class="text-2xl font-bold text-red-700">âŒ ç­”æ¡ˆéŒ¯èª¤ï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚</p>
                    <button class="bg-gray-400 text-white py-2 px-4 rounded-lg mt-2 hover:bg-gray-500" onclick="resetOptions()">ç¹¼çºŒå˜—è©¦</button>
                `;
                // è®“ç­”éŒ¯çš„é¸é …è®Šé€æ˜
                setTimeout(() => {
                    selectedButton.classList.add('hidden');
                }, 500);
            }
        }

        // é‡è¨­é¸é … (ç­”éŒ¯å¾Œç¹¼çºŒå˜—è©¦)
        window.resetOptions = function() {
            const allButtons = document.querySelectorAll('#options-area button');
            allButtons.forEach(btn => {
                if (!btn.classList.contains('bg-green-500')) {
                    btn.disabled = false;
                }
                document.getElementById('feedback-area').innerHTML = `<p id="message" class="text-xl font-bold text-gray-600">è«‹å¾ä¸‹æ–¹é¸é …é¸å‡ºæ­£ç¢ºæˆèªã€‚</p>`;
            });
        }

        // åˆå§‹åŒ–æ•´å€‹æ‡‰ç”¨
        window.onload = function () {
            initLessonButtons();
            setupSpeechSynthesis(); // åˆå§‹åŒ–ç€è¦½å™¨èªéŸ³åŠŸèƒ½
        };
    </script>
</body>
</html>
